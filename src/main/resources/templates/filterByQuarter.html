<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>All Training Schedules</title>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <link href="../css/styles.css" rel="stylesheet">
</head>
<body>

<div class="container mt-4">
    <h1 class="mb-4">Filter By Quater </h1>
    <label for="filterType">Choose Filter Type:</label>
    <select id="filterType" name="filterType">
        <option value="quarter" selected>Quarter</option>
        <option value="classType">Class Type</option>
        <option value="day">By Day</option>
        <option value="trainer">By Trainer</option>
        <option value="week">By Week</option>
        <option value="month">By Month</option>
        <option value="year">By Year</option>
    </select>

    <div id="dynamicFilter"></div>

    <button type="submit" onclick="applyFilter()">Apply Filter</button>

    <div id="filteredSchedules">
    </div>
    <table class="table table-striped">
        <thead>
        <tr>
            <th>ID</th>
            <th>Training Type</th>
            <th>Class Type</th>
            <th>Course Name</th>
            <th>Training Date</th>
            <th>Training Time</th>
            <th>Actions</th>
        </tr>
        </thead>
        <tbody id="scheduleTable">
        <tr th:each="schedule, rowStat : ${schedules}">
            <td th:text="${schedule.id}"></td>
            <td th:text="${schedule.trainingType}"></td>
            <td th:text="${schedule.classType}"></td>
            <td th:text="${schedule.courseName}"></td>
            <td th:text="${schedule.trainingDate}"></td>
            <td th:text="${schedule.trainingTime}"></td>
            <td>
                <a th:href="'detail/' + ${schedule.id}"  class="btn btn-primary btn-sm">View</a>
                <a th:href="'edit/' + ${schedule.id}" class="btn btn-warning btn-sm">Edit</a>
                <a href="#" class="btn btn-danger btn-sm">Delete</a>
            </td>
        </tr>
        <!-- Add more rows dynamically based on your data -->
        </tbody>
    </table>
</div>
<script >
    document.addEventListener('DOMContentLoaded', function() {
    var defaultFilter = 'quarter'; // Set the default filter type to 'day'
    var filterType = document.getElementById('filterType');
    var dynamicFilter = document.getElementById('dynamicFilter');

    // Set the default filter to 'By Day'
    filterType.value = defaultFilter;

    // Simulate the 'change' event to apply the default filter on page load
    var changeEvent = new Event('change');
    filterType.dispatchEvent(changeEvent);
});

    document.getElementById('filterType').addEventListener('change', function() {
        var filterType = document.getElementById('filterType').value;
        var dynamicFilter = document.getElementById('dynamicFilter');
        dynamicFilter.innerHTML = '';

        if (filterType === 'quarter') {
            dynamicFilter.innerHTML = `
                <label for="quarterFilter">Choose Quarter:</label>
                <select id="quarterFilter" name="quarterFilter">
                    <option value="1">Q1</option>
                    <option value="2">Q2</option>
                    <option value="3">Q3</option>
                    <option value="4">Q4</option>
                </select>`;

        } else if (filterType === 'classType') {
            dynamicFilter.innerHTML = `
                <label for="classTypeFilter">Choose Class Type:</label>
                <select id="classTypeFilter" name="classTypeFilter">
                    <option value="zoom">Zoom</option>
                    <option value="room">Room</option>
                </select>`;
        } else if (filterType === 'day') {
            var dynamicFilter = document.getElementById('dynamicFilter');
            dynamicFilter.innerHTML = `
                <label for="dayFilter">Choose Day:</label>
                <input type="date" id="dayFilter" name="dayFilter" value="2023-01-01">
            `;
        }else if (filterType === 'week') {
            dynamicFilter.innerHTML = `
                <label for="weekFilter">Choose Week:</label>
                <input type="number" id="weekFilter" name="weekFilter" min="1" max="52">`;
        } else if (filterType === 'month') {
            dynamicFilter.innerHTML = `
                <label for="monthFilter">Choose Month:</label>
                <select id="monthFilter" name="monthFilter">
                    <option value="1">January</option>
                    <option value="2">February</option>
                    <option value="3">March</option>
                    <option value="4">April</option>
                    <option value="5">May</option>
                    <option value="6">June</option>
                    <option value="7">July</option>
                    <option value="8">August</option>
                    <option value="9">September</option>
                    <option value="10">October</option>
                    <option value="11">November</option>
                    <option value="12">December</option>
                </select>`;
        } else if (filterType === 'year') {
            dynamicFilter.innerHTML = `
                <label for="yearFilter">Choose Year:</label>
                <input type="number" id="yearFilter" name="yearFilter" min="2022" max="2100">`;
        } else if (filterType === 'trainer') {
            // Trainer filter - populate with available trainers
            dynamicFilter.innerHTML = `
                <label for="trainerFilter">Choose Trainer:</label>
                <select id="trainerFilter" name="trainerFilter">
                    ${trainers.map(trainer => `<option value="${trainer.id}">${trainer.name}</option>`).join('')}
                </select>`;
        }
        // Add other conditions for 'week', 'month', and 'year' filters as needed
    });


    function applyFilter() {
        var filterType = document.getElementById('filterType').value;
        if (filterType === 'day') {
            var selectedDay = document.getElementById('dayFilter').value;
            window.location.href = '../ui/filterByDay/' + selectedDay;
        } else if (filterType === 'week') {
            var selectedWeek = document.getElementById('weekFilter').value;
            window.location.href = '../ui/filterByWeek/' + selectedWeek;
        } else if (filterType === 'quarter') {
            var selectedQuarter = document.getElementById('quarterFilter').value;
            window.location.href = '../ui/filterByQuarter/' + selectedQuarter;
        } else if (filterType === 'month') {
            var selectedMonth = document.getElementById('monthFilter').value;
            window.location.href = '../ui/filterByMonth/' + selectedMonth;
        } else if (filterType === 'year') {
            var selectedYear = document.getElementById('yearFilter').value;
            window.location.href = '../ui/filterByYear/' + selectedYear;
        } else if (filterType === 'year') {
            var selectedYear = document.getElementById('yearFilter').value;
            window.location.href = '../ui/filterByYear/' + selectedYear;
        } else {
            var selectedTrainer = document.getElementById('yearFilter').value;
            window.location.href = '../ui/filterByDay/' + selectedTrainer;
        }
    }
</script>

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.3/dist/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

<!-- Include your custom JavaScript file for handling filters and actions -->
<script src="custom.js"></script>
</body>
</html>
